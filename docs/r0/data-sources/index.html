<!doctype html>
<html lang="EN">
  <head>
    <title>Data Sources</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/cerulean/bootstrap.min.css" id="nsd-bootstrap-theme-stylesheet">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.min.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Nasdanika/html@master/model/app.gen/web-resources/css/app.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jstree@3.3.16/dist/themes/default/style.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@5.5.0/github-markdown.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/default.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-vue@2.23.0/dist/bootstrap-vue.css">
    <script src="https://cdn.jsdelivr.net/gh/Nasdanika/html@master/model/app.gen/web-resources/js/common.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/Nasdanika/html@master/model/app.gen/web-resources/js/dark-head.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jstree@3.3.16/dist/jstree.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.16/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-vue@2.23.0/dist/bootstrap-vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/Nasdanika/html@master/model/app.gen/web-resources/js/components/table.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/Nasdanika-Models/ecore@master/graph/web-resources/components/table.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9BRJVLK8CC"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9BRJVLK8CC');
</script>    

<script src="../../search-documents.js"></script>

<script src="https://cdn.jsdelivr.net/gh/olivernn/lunr.js@v2.3.9/lunr.js"></script>

<script>
// Script for full-text search of JsTree

window.nsdJsTreeSearchCallback = function(str, node) { 
    var sf = new $.vakata.search(str, true, { caseSensitive : false, fuzzy : false }); 
    if (sf.search(node.text).isMatch) {
		return true;
	} 
    let searchResult = this.search(str); 
    for (const sr in searchResult) {
        if (searchResult[sr].ref === node.original['data-nsd-label-uuid']) {
            return true;
        } 
    } 
    return false; 
}.bind(lunr(function () {
			  this.ref('id');
			  this.field('title');
			  this.field('content');

			  for (const key in searchDocuments) {
				  let doc = searchDocuments[key];
				this.add({
					id: doc['action-uuid'],
					title: doc.title,
					path: doc.path,
					content: doc.content
				});  
			  }
			}));
</script>
</head>
  <body>
    <div class="container-fluid nsd-app-container">
      <div class="row">
        <div class="col nsd-app-header">
          <a href="https://docs.nasdanika.org/" data-nsd-label-uuid="9a66b7bc-50a5-4026-93dd-bac561c58a31" class="nsd-app-header-title">
            <img src="https://docs.nasdanika.org/images/nasdanika-logo.png" class="nsd-app-label-icon">Nasdanika</a>
          <ul class="nav nsd-app-header-navs">
            <li class="nav-item">
              <a href="../../search.html" data-nsd-label-uuid="fd45622c-dcb3-4d30-b6c8-8ac36ff52776" class="nav-link"><span class="fas fa-search nsd-app-label-icon"></span>Search</a>
            </li>
            <li class="nav-item">
              <a href="../../glossary.html" data-nsd-label-uuid="b22dd9b8-1664-47e0-90b7-5791139f4afc" class="nav-link"><span class="fas fa-book nsd-app-label-icon"></span>Glossary</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="row">
        <div class="col nsd-app-navbar">
          <ul class="navbar navbar-light navbar-expand-lg">
            <a href="../../index.html" data-nsd-label-uuid="84d71664-ab5c-4ccf-ac4a-a39ed5391ff8" class="navbar-brand">Retrieval Augmented Generation</a>
            <button type="button" data-toggle="collapse" data-target="#nsd_z" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler"><span class="navbar-toggler-icon"></span>
            </button>
            <div id="nsd_z" class="collapse navbar-collapse"></div>
          </ul>
        </div>
      </div>
      <div class="row nsd-app-content-row">
        <div class="col nsd-app-navigation-panel">
          <div class="list-group list-group-flush"><span data-nsd-label-uuid="1c81631e-81ca-43e4-85d9-28094502f68c" class="list-group-item list-group-action active"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAB6UlEQVR4XtXQzUvbYADHcf+BQZ9tutoXGTs4Z6ftQcTOQ5r04sUX3GWdVXceO43BlnbdSTw0tkWH4kFBTRw0dZe5F62F3TbwICydk8Emaj04bH35B/ztSRrCFgi0F9EffEguz5c8qam5VOucPbzCLZwOBsXTSU48yVIKJx7vUgecpDra5aSSwi2WskGpOMktFgfVM+aOsc6pPyINghNVJ7rjMulIV9IVwYqHuDddEM0dY77IluyLbqFt5Bfa4zvoSO7BP16Af2If/tcFdEzsoT21gzbhN3yjP+F5lcedmCKbO8bUoJf/AS+/idZIWUvku+ZutMwTzWuaX6qU8w4+38xUG2yKfMuYO8ZuDq/Ktx9/gefpBlpe5C2DzbyCxmcbuPXkK5yPPlt/oTu0LLtD7+HSfIA7vIKGoSwahnMa91AOzvAaHANZag31lCOcqzzoevgRTs0naoVahUNVadAVWs5UG6wfyFn/Q3vPfMb14F3lQfpe25u2DhI2Ll9lE7jeNY267jnY+97A3i/Dfn+Jeosb/Uuo60ujtlvCta4ZEHYchElZX1kNkkAcJCDoxgw2JvGPpC51zkEbI8Ro8KyK4BkVM3f+GwkKrYQReCptC4yt09g2fR7QkGqbWidMMk2YBG9jE17z+Yu/vxFh4zk+8uCxAAAAAElFTkSuQmCC" class="nsd-app-label-icon">Data Sources</span>
            <a href="../generator/index.html" data-nsd-label-uuid="73344b59-84ed-4668-ab0d-ef76d5a4c57f" class="list-group-item list-group-action">Generator</a>
            <a href="../key-extractor/index.html" data-nsd-label-uuid="a60a3536-a1b2-474e-af4a-a1044d6aa604" class="list-group-item list-group-action">Key Extractor</a>
            <a href="../loader/index.html" data-nsd-label-uuid="cc8f119d-7d35-480f-b88d-993f238a3340" class="list-group-item list-group-action">Loader</a>
            <a href="../query-engine/index.html" data-nsd-label-uuid="ab50bd1b-91f8-418c-8fe9-4b81bf013ad4" class="list-group-item list-group-action">Query Engine</a>
            <a href="../requestor/index.html" data-nsd-label-uuid="067f1a15-0629-4d7d-b717-2bc39cb5991d" class="list-group-item list-group-action">Requestor</a>
            <a href="../responder/index.html" data-nsd-label-uuid="8a64559d-4f23-4724-8a2a-34131a376a4f" class="list-group-item list-group-action">Responder</a>
            <a href="../store/index.html" data-nsd-label-uuid="c4f9f605-fd87-4b12-a92f-35dba43118af" class="list-group-item list-group-action">
              <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAB3klEQVR4XpWUTUsCURSGZ9Gilv2BWrVs299oV78iKPOrKJpFUPm5LQhsZhyJRMo0qQhMwdQov0rNbBVFQUka7W/zXhypOzN+XHjhcM77HOace5XjdA7Px4c8Nt+k07w34zSL826rsAohdliEWdTgYTnNcVh8E9vrod0j4aqROKmSfOqVVPMNUr9vUSFGDjV44AXD9qFnyypMRfzZn8dSkzyVv/sSvGDAsv04t1VaK2beNFAvgQHL9uPcdokPS2lyHiqQ8u2HBmQFD7xgwLL9OPeyxNfvmqSUfSdnwTxGIRE5S6LyNYkG2lJi5FCDB14wYNl+nYbsl0DqpbB5WjNsqHx2rfSlAXoJjO7ITqvAh8U0qRX7bwovGLBsPzoybgw7OvZnyGW0QnKpF807RA41eOClt6w78p8dAgaIB3wazHUuBTFyqKk77brDQR61KjCGO7w4LGmAXgJjuMNk7IEu+Sb5rAFZwQMvGP2R2zvECAnFRB92+3H/UzufiFWp13iHXR52Nxk3tAmmfn7DrMCAZftxG3Z5VPSeFgb5x4EXDFi2Hz087xv2LgVM+zvxKm4Pi6/kPpWxWlSIkUMNHng9CwcjbB/ds2kTx5xmYVr5y59zWcQVCDFyrkV5nPWr5xeK1c0WtEuRDAAAAABJRU5ErkJggg==" class="nsd-app-label-icon">Store</a>
            <a href="../user/index.html" data-nsd-label-uuid="bfc74905-4cd5-44bc-9297-b43746e40585" class="list-group-item list-group-action">
              <img src="https://img.icons8.com/officel/16/user.png" class="nsd-app-label-icon">User</a>
          </div>
        </div>
        <div data-nsd-label-uuid="1c81631e-81ca-43e4-85d9-28094502f68c" data-nsd-action-uris="uuid:1c81631e-81ca-43e4-85d9-28094502f68c" class="col nsd-app-content-panel">
          <div class="container-fluid">
            <div class="row nsd-app-content-panel-title-and-items-row">
              <div class="col-auto">
                <h1><span data-nsd-label-uuid="1c81631e-81ca-43e4-85d9-28094502f68c" class="nsd-app-content-panel-title"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAB6UlEQVR4XtXQzUvbYADHcf+BQZ9tutoXGTs4Z6ftQcTOQ5r04sUX3GWdVXceO43BlnbdSTw0tkWH4kFBTRw0dZe5F62F3TbwICydk8Emaj04bH35B/ztSRrCFgi0F9EffEguz5c8qam5VOucPbzCLZwOBsXTSU48yVIKJx7vUgecpDra5aSSwi2WskGpOMktFgfVM+aOsc6pPyINghNVJ7rjMulIV9IVwYqHuDddEM0dY77IluyLbqFt5Bfa4zvoSO7BP16Af2If/tcFdEzsoT21gzbhN3yjP+F5lcedmCKbO8bUoJf/AS+/idZIWUvku+ZutMwTzWuaX6qU8w4+38xUG2yKfMuYO8ZuDq/Ktx9/gefpBlpe5C2DzbyCxmcbuPXkK5yPPlt/oTu0LLtD7+HSfIA7vIKGoSwahnMa91AOzvAaHANZag31lCOcqzzoevgRTs0naoVahUNVadAVWs5UG6wfyFn/Q3vPfMb14F3lQfpe25u2DhI2Ll9lE7jeNY267jnY+97A3i/Dfn+Jeosb/Uuo60ujtlvCta4ZEHYchElZX1kNkkAcJCDoxgw2JvGPpC51zkEbI8Ro8KyK4BkVM3f+GwkKrYQReCptC4yt09g2fR7QkGqbWidMMk2YBG9jE17z+Yu/vxFh4zk+8uCxAAAAAElFTkSuQmCC" class="nsd-app-label-icon">Data Sources</span>
                </h1>
              </div>
            </div>
            <div class="row nsd-app-content-panel-content-row">
              <div class="col">
                <div class="container-fluid">
                  <div class="row">
                    <div class="col"><div class="markdown-body"><p>Data sources contain data items.</p>
<p>A data item is anything from which one or more keys can be extracted:</p>
<ul>
<li>Text</li>
<li>Image</li>
<li>Graph</li>
<li>PDF, HTML, Markdown - a graph of text nodes (sections/paragraphs/sentences)</li>
<li>Formatted text - a tree of text nodes (paragraphs/sentences)</li>
<li>Source files such as Java - parse tree</li>
<li>Drawio diagrams - diagram elements may have label text node, tooltip text node/graph, documentation text nodes/graph</li>
<li>OCR Json</li>
<li>Ecore models (which includes drawio diagrams)</li>
</ul>
<p>A data source may be implemented as:</p>
<ul>
<li>File system</li>
<li>Zip archive</li>
<li>Source repository (Git, GitHub, GitLab). <a href="https://github.com/gitlab4j/gitlab4j-api">gitlab4j-api</a> and <a href="https://gitlab.models.nasdanika.org/">GitLab model</a> built on top of it may be used to retrieve items from GitLab.</li>
<li>(REST) API</li>
<li>Maven repositories</li>
<li>Relational databases</li>
<li>…</li>
</ul>
<p>Ecore resources and resource factories may be used as an abstraction layer to represent all types of data sources and data items as Ecore resources in which all elements are identified by URI’s:</p>
<ul>
<li>URI converters and handlers allow to load from different storage formats. For example, a custom URI handler for <code>gitlab</code> URI scheme may load from a GitLab server using REST API without cloning repositories, <code>maven</code> URI handler may load from Maven repositories/archives.</li>
<li>Resource factories may be used to load resources differently based on extensions. For example:
<ul>
<li><code>md</code> extension would be treated as a Markdown file - convert to HTML and then use HTML loader to convert to some internal implementation. Nasdanika provides resource factories for Drawio diagrams and Excel files.</li>
<li><code>html</code> and <code>htm</code> extensions would be handled by an HTML factory which may parse HTML using Jsoup and then structure HTML contents into sections using <code>H</code> tag hierarchy, then to paragraphs and sentences. It may compute cross-references between files (resources) and parts of the document. These cross-references may be taken into account when computing similarity.</li>
</ul>
</li>
</ul>
<p>Ecore resource set do not provide functionality for iterating over different storage systems, they load resources from URI’s using resource factories.</p>
<p>As such, the data source ecosystem would include the following:</p>
<ul>
<li>Storage navigators implementing <code>Iterable&lt;URI&gt;</code><sup id="fnref-1"><a class="footnote-ref" href="#fn-1">1</a></sup></li>
<li><a href="https://javadoc.io/static/org.eclipse.emf/org.eclipse.emf.ecore/2.33.0/org/eclipse/emf/ecore/resource/URIHandler.html">URI handlers</a> for URI’s which can be loaded as streams (files).</li>
<li><a href="https://javadoc.io/static/org.eclipse.emf/org.eclipse.emf.ecore/2.33.0/org/eclipse/emf/ecore/resource/Resource.html">Resources</a> and resource factories. Depending on a resource type, resources can be loaded from streams delegating to URI handlers to open them. Or they may use custom logic to load a resource. For example, JDBC to load from a relational database.</li>
</ul>
<p>The data sources ecosystem doesn’t have to be RAG-specific - it can be used for other purposes as well. For example, for <a href="https://github.com/Nasdanika-Models/reasoning">reasoning</a>.</p>
<h2><a href="#roadmap" id="roadmap">Roadmap</a></h2>
<ul>
<li>Create a <code>common</code> module for common functionality.</li>
<li>Implement storage navigators for:
<ul>
<li>File system</li>
<li>Zip archives</li>
<li>Generic REST API - GET to list directories and download resources. Token based authentication.</li>
</ul>
</li>
<li>Implement resources and resource factories for:
<ul>
<li>HTML using [Jsoup](<a href="https://jsoup.org/">https://jsoup.org/</a> and <a href="https://html.models.nasdanika.org/">HTML model</a></li>
<li>PDF using <a href="https://pdfbox.apache.org/">Apache PDFBox</a></li>
<li>Markdown using <a href="https://javadoc.io/doc/org.nasdanika.core/common/latest/org.nasdanika.common/org/nasdanika/common/MarkdownHelper.html">MarkdownHelper</a></li>
<li>Plain text.</li>
</ul>
</li>
</ul>
<p>Use <a href="https://ncore.models.nasdanika.org/references/eClassifiers/String/index.html">String</a> for sentences. For plain text use <a href="https://ncore.models.nasdanika.org/references/eClassifiers/List/index.html">List</a> of strings for paragraphs.</p>
<p>Resources shall implement lookup by URI fragment. For example, line/column number for plain text and markdown, CSS path for HTML, TBD for PDF.</p>
<div class="footnotes">
<hr>
<ol>
<li id="fn-1">
<p>EMF <a href="https://javadoc.io/static/org.eclipse.emf/org.eclipse.emf.common/2.28.0/org/eclipse/emf/common/util/URI.html">URI</a></p>
<a href="#fnref-1" class="footnote-backref">↩</a>
</li>
</ol>
</div>
</div></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col nsd-app-footer">
          <ul class="nav nsd-app-footer-navs">
            <li class="nav-item">
              <a href="https://github.com/Nasdanika/retrieval-augmented-generation" data-nsd-label-uuid="e1cf0eb5-a51e-4eb3-b7ee-bd1a7e9a9f49" class="nav-link"><span class="fab fa-github nsd-app-label-icon"></span>Sources</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </body>
</html>